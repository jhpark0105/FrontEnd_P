<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!--<script src="https://unpkg.com/vue@3"></script>-->
  <script src="https://cdn.jsdelivr.net/npm/vue@3.2.31/dist/vue.global.prod.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

  <script>
    let datas = [
      ["í–„ë²„ê±°", 5],
      ["ë„ë„ˆì¸ ", 2],
      ["ê¹€ë°¥", 7],
      ["ë¶•ì–´ë¹µ", 10],
      ["ì¹˜í‚¨", 1]
    ];

    google.charts.load("current",{packages:["corechart"]}); //ì½”ì–´ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë”©
    google.charts.setOnLoadCallback(drawFunc); //ì½œë°± í•¨ìˆ˜ ì§€ì •

    function drawFunc(){
      let data = google.visualization.arrayToDataTable([
        ["ì¢…ë¥˜","ê°œìˆ˜"], ...datas
      ]);

      let options = {title:'ë¨¹ê³  ì‹¶ì€ ê²ƒ', is3D:true};
      let chart = new google.visualization.PieChart(document.querySelector("#chart_div")); //PieChart: ë°ì´í„° ì–‘ì´ ì ì„ë•Œ 
      chart.draw(data, options); //ì°¨íŠ¸ ê·¸ë¦¼
    }
  </script>
</head>
<body>
  <h2>êµ¬ê¸€ ì°¨íŠ¸ ê·¸ë¦¬ê¸°ğŸ“Š</h2>
  ë¨¹ê³  ì‹¶ì€ êµ°ê²ƒì§ˆ ëª©ë¡<br/>
  <div id="chart_div" style="height: 500px;"></div>

  <div id="app">
    <ul>
      <li v-for="(value, idx) in dataArray" :key="idx">
        {{value[0]}} : {{value[1]}} &nbsp;
        <button @click="addFunc(idx)">1 ì¦ê°€</button>&nbsp;
        <button @click="subFunc(idx)">1 ê°ì†Œ</button>
      </li>
    </ul>
  </div>

  <script>
    const {createApp} = Vue;

    createApp({
      data(){
        return{
          dataArray:datas
        }
      },
      methods:{
        addFunc(idx){
          this.dataArray[idx][1]++;
          this.updateChart();
        },
        subFunc(idx){
          if(this.dataArray[idx][1] > 0){
            this.dataArray[idx][1]--;
            this.updateChart();
          }
        },
        updateChart(){
          drawFunc();
        }
      }
    }).mount("#app");
  </script>
</body>
</html>